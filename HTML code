<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BST Visualizer</title>

<style>
:root {
  --bg1:#0f2027;
  --bg2:#203a43;
  --bg3:#2c5364;
  --node1:#7f7cff;
  --node2:#4b48ff;
  --search:#00ffd5;
  --danger:#ff5c5c;
}

body {
  margin:0;
  font-family: "Segoe UI", sans-serif;
  background: linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
  color:white;
}

header {
  text-align:center;
  padding:18px;
  font-size:26px;
  font-weight:600;
}

.controls {
  display:flex;
  justify-content:center;
  gap:8px;
  flex-wrap:wrap;
  padding:12px;
  background:rgba(255,255,255,0.12);
  backdrop-filter: blur(12px);
  border-radius:16px;
  margin:0 12px;
}

input,button {
  padding:10px 14px;
  border:none;
  border-radius:12px;
  font-size:14px;
}

input {
  outline:none;
}

button {
  background: linear-gradient(135deg,var(--node1),var(--node2));
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
}

button:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow:0 0 12px var(--node1);
}

#tree {
  position:relative;
  height:520px;
  margin-top:15px;
}

.node {
  position:absolute;
  width:50px;
  height:50px;
  border-radius:50%;
  background: radial-gradient(circle at top,var(--node1),var(--node2));
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  box-shadow:0 0 22px rgba(127,124,255,0.8);
  animation: pop 0.35s ease;
}

@keyframes pop {
  from { transform: scale(0); opacity:0; }
  to { transform: scale(1); opacity:1; }
}

.search {
  background: radial-gradient(circle at top,#6affec,var(--search));
  box-shadow:0 0 28px var(--search);
  animation:pulse 0.6s infinite alternate;
}

@keyframes pulse {
  from { transform: scale(1); }
  to { transform: scale(1.15); }
}

.fade-out {
  animation: vanish 0.45s forwards;
}

@keyframes vanish {
  to { transform: scale(0); opacity:0; }
}

.traverse {
  box-shadow:0 0 30px #ffd369;
  background: radial-gradient(circle at top,#ffe29f,#ffa751);
}

svg {
  position:absolute;
  width:100%;
  height:520px;
  pointer-events:none;
}

line {
  stroke:white;
  stroke-width:2;
  opacity:0.75;
}

#output {
  text-align:center;
  margin-top:10px;
  font-size:16px;
}
</style>
</head>

<body>
<p></p>
<p></p>
<header>Binary Search Tree Visualizer</header>

<div class="controls">
  <input type="number" id="val" placeholder="Enter value">
  <button onclick="insert()">Insert</button>
  <button onclick="search()">Search</button>
  <button onclick="removeNode()">Delete</button>
  <button onclick="inorder()">Inorder</button>
  <button onclick="preorder()">Preorder</button>
  <button onclick="postorder()">Postorder</button>
  <button onclick="clearTree()">Clear</button>
</div>

<div id="output"></div>

<div id="tree">
  <svg id="svg"></svg>
</div>

<script>
class Node {
  constructor(val,x,y){
    this.val=val;
    this.left=null;
    this.right=null;
    this.x=x;
    this.y=y;
    this.el=document.createElement("div");
    this.el.className="node";
    this.el.innerText=val;
    this.el.style.left=x+"px";
    this.el.style.top=y+"px";
    tree.appendChild(this.el);
  }
}

let root=null;
const svg=document.getElementById("svg");

function drawLine(p,c){
  const l=document.createElementNS("http://www.w3.org/2000/svg","line");
  l.setAttribute("x1",p.x+25);
  l.setAttribute("y1",p.y+50);
  l.setAttribute("x2",c.x+25);
  l.setAttribute("y2",c.y);
  svg.appendChild(l);
}

function insert(){
  const v=+val.value;
  if(isNaN(v))return;
  if(!root) root=new Node(v,innerWidth/2-25,20);
  else insertNode(root,v,root.x,root.y,220);
}

function insertNode(n,v,x,y,off){
  glow(n);
  if(v<n.val){
    if(!n.left){
      n.left=new Node(v,x-off,y+90);
      drawLine(n,n.left);
    } else insertNode(n.left,v,n.left.x,n.left.y,off/2);
  } else if(v>n.val){
    if(!n.right){
      n.right=new Node(v,x+off,y+90);
      drawLine(n,n.right);
    } else insertNode(n.right,v,n.right.x,n.right.y,off/2);
  }
}

function search(){
  clearEffects();
  searchNode(root,+val.value);
}

function searchNode(n,v){
  if(!n)return;
  n.el.classList.add("search");
  setTimeout(()=>n.el.classList.remove("search"),600);
  if(v<n.val) setTimeout(()=>searchNode(n.left,v),600);
  else if(v>n.val) setTimeout(()=>searchNode(n.right,v),600);
}

function removeNode(){
  root=deleteNode(root,+val.value);
}

function deleteNode(n,v){
  if(!n)return null;
  if(v<n.val) n.left=deleteNode(n.left,v);
  else if(v>n.val) n.right=deleteNode(n.right,v);
  else{
    if(!n.left && !n.right){
      n.el.classList.add("fade-out");
      setTimeout(()=>n.el.remove(),450);
      return null;
    }
    if(!n.left){
      n.el.classList.add("fade-out");
      setTimeout(()=>n.el.remove(),450);
      return n.right;
    }
    if(!n.right){
      n.el.classList.add("fade-out");
      setTimeout(()=>n.el.remove(),450);
      return n.left;
    }
    const s=findMin(n.right);
    n.val=s.val;
    n.el.innerText=s.val;
    n.right=deleteNode(n.right,s.val);
  }
  return n;
}

function findMin(n){ while(n.left)n=n.left; return n; }

function inorder(){ animate(traverse(root,[],"in")); }
function preorder(){ animate(traverse(root,[],"pre")); }
function postorder(){ animate(traverse(root,[],"post")); }

function traverse(n,a,t){
  if(!n)return a;
  if(t==="pre") a.push(n);
  traverse(n.left,a,t);
  if(t==="in") a.push(n);
  traverse(n.right,a,t);
  if(t==="post") a.push(n);
  return a;
}

function animate(list){
  let i=0;
  output.innerText="Traversal: "+list.map(n=>n.val).join(" ");
  const timer=setInterval(()=>{
    clearEffects();
    if(i===list.length) return clearInterval(timer);
    list[i].el.classList.add("traverse");
    i++;
  },650);
}

function glow(n){
  n.el.classList.add("search");
  setTimeout(()=>n.el.classList.remove("search"),350);
}

function clearEffects(){
  document.querySelectorAll(".node").forEach(n=>{
    n.classList.remove("search","traverse");
  });
}

function clearTree(){
  root=null;
  tree.innerHTML='<svg id="svg"></svg>';
  output.innerText="";
}
</script>

</body>
</html>
